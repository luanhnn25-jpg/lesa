<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <meta name="theme-color" content="#0b3d91" />
  <title>Les√£o por Press√£o ‚Äî Projeto Integrador</title>

  <!-- PWA (se voc√™ j√° tem manifest/icons, mantenha) -->
  <link rel="manifest" href="manifest.webmanifest" />
  <link rel="icon" type="image/png" sizes="192x192" href="icons/icon-192.png" />
  <link rel="icon" type="image/png" sizes="512x512" href="icons/icon-512.png" />
  <link rel="apple-touch-icon" href="icons/icon-192.png" />
  <meta name="apple-mobile-web-app-capable" content="yes" />

  <style>
    :root{
      --blue-900:#0b3d91;
      --blue-800:#0a2f73;
      --bg:#f4f6f9;
      --card:#ffffff;
      --text:#0f172a;
      --muted:#475569;
      --border:rgba(15,23,42,.10);
      --shadow:0 12px 30px rgba(2,6,23,.10);
      --shadow2:0 18px 45px rgba(2,6,23,.16);
      --radius:18px;
      --accent:#2563eb;

      --ok:#16a34a;
      --warn:#f59e0b;
      --bad:#dc2626;

      --chip:#eef2ff;
      --ring: 0 0 0 4px rgba(56,130,246,.18);
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      background:
        radial-gradient(1200px 600px at 10% -10%, rgba(11,91,211,.14), transparent 55%),
        radial-gradient(900px 500px at 90% 10%, rgba(11,61,145,.12), transparent 55%),
        var(--bg);
      color:var(--text);
      font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
      line-height:1.55;
    }

    /* =========================
       TOP HEADER (brand + user)
       ========================= */
    .top{
      background: linear-gradient(180deg, var(--blue-900), #0b4ab1);
      color:#fff;
      padding: 18px 14px;
      position: sticky;
      top:0;
      z-index: 80;
      box-shadow: 0 12px 24px rgba(2,6,23,.12);
      border-bottom: 1px solid rgba(255,255,255,.10);
      overflow:hidden;
    }
    .top::after{
      content:"";
      position:absolute;
      inset:-60px -180px auto -180px;
      height: 170px;
      background: radial-gradient(circle at 50% 40%, rgba(255,255,255,.18), transparent 60%);
      transform: rotate(-2deg);
      pointer-events:none;
    }
    .top-inner{
      max-width:1100px;
      margin:0 auto;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      position:relative;
      z-index:1;
      flex-wrap:wrap; /* ‚úÖ evita ‚Äútampar‚Äù em telas menores */
    }
    .brand{
      display:flex;
      align-items:center;
      gap:12px;
      min-width: 260px;
      flex: 1 1 420px;
    }
    .logo{
      width:44px;height:44px;border-radius:14px;
      display:grid;place-items:center;
      font-weight: 950;
      letter-spacing:.5px;
      background: rgba(255,255,255,.14);
      border:1px solid rgba(255,255,255,.18);
      box-shadow: 0 14px 28px rgba(2,6,23,.18);
      flex:0 0 auto;
    }
    .brand h1{
      margin:0;
      font-size: clamp(18px, 2.2vw, 34px);
      font-weight: 1000;
      letter-spacing:.2px;
      line-height:1.05;
    }
    .brand p{
      margin:6px 0 0;
      font-size: 13px;
      opacity:.92;
    }

    .top-actions{
      display:flex;
      align-items:center;
      justify-content:flex-end;
      gap:10px;
      flex: 0 1 520px;
      margin-left:auto;
    }

    .install-btn{
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.12);
      color:#fff;
      font-weight: 950;
      border-radius: 999px;
      padding:10px 14px;
      cursor:pointer;
      box-shadow: 0 14px 28px rgba(2,6,23,.18);
      transition: transform .12s ease, background .12s ease;
      white-space:nowrap;
    }
    .install-btn:hover{ transform: translateY(-1px); background: rgba(255,255,255,.14); }
    .install-btn:focus-visible{ outline:none; box-shadow: var(--ring); }

    /* Usu√°rio */
    .user-pill{
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 12px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.10);
      box-shadow: 0 14px 28px rgba(2,6,23,.18);
      cursor:pointer;
      user-select:none;
      max-width: 360px;
      min-width: 0;
      position:relative;
      transition: transform .12s ease, background .12s ease;
      white-space:nowrap;
    }
    .user-pill:hover{ transform: translateY(-1px); background: rgba(255,255,255,.12); }
    .user-ico{
      width:28px;height:28px;border-radius:999px;
      display:grid;place-items:center;
      background: rgba(255,255,255,.16);
      border:1px solid rgba(255,255,255,.18);
      flex:0 0 auto;
    }
    .user-text{
      min-width:0;
      display:flex;
      flex-direction:column;
      gap:2px;
      line-height:1.1;
      max-width: 240px;
    }
    .user-hello{
      font-size:12px;
      opacity:.92;
      font-weight:800;
      display:flex;
      align-items:center;
      gap:8px;
    }
    .badge{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding:4px 8px;
      border-radius:999px;
      font-size:11px;
      font-weight:950;
      border:1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.10);
      width: fit-content;
    }
    .badge.premium{
      border-color: rgba(22,163,74,.35);
      background: rgba(22,163,74,.16);
    }
    .badge.free{
      border-color: rgba(245,158,11,.35);
      background: rgba(245,158,11,.16);
    }
    .user-email{
      font-size:12px;
      font-weight:900;
      overflow:hidden;
      text-overflow:ellipsis;
      max-width: 240px;
      opacity:.96;
    }
    .chev{ margin-left:6px; opacity:.9; font-weight:900; flex:0 0 auto; }

    .user-menu{
      position:absolute;
      right:0;
      top: calc(100% + 10px);
      width: 260px;
      background:#0b2f73;
      border:1px solid rgba(255,255,255,.14);
      border-radius: 16px;
      box-shadow: 0 20px 45px rgba(2,6,23,.30);
      padding:8px;
      display:none;
      z-index: 999;
      transform-origin: top right;
      animation: popMenu .12s ease both;
    }
    @keyframes popMenu{ from{opacity:0; transform: translateY(-6px) scale(.98);} to{opacity:1; transform: translateY(0) scale(1);} }
    .user-menu.open{ display:block; }
    .user-menu a, .user-menu button{
      width:100%;
      display:flex;
      align-items:center;
      gap:10px;
      padding:10px 10px;
      border-radius: 12px;
      border:1px solid transparent;
      background: transparent;
      color:#eaf2ff;
      cursor:pointer;
      font-weight:900;
      text-decoration:none;
      font-size:14px;
      text-align:left;
    }
    .user-menu a:hover, .user-menu button:hover{
      background: rgba(255,255,255,.10);
      border-color: rgba(255,255,255,.10);
    }
    .user-menu .sep{
      height:1px;
      background: rgba(255,255,255,.14);
      margin:6px 4px;
    }
    .user-note{
      padding:10px 10px;
      border-radius:12px;
      background: rgba(255,255,255,.06);
      border:1px solid rgba(255,255,255,.10);
      font-size:12px;
      color: rgba(234,242,255,.92);
      line-height:1.35;
      margin:6px 4px 8px;
    }

    /* =========================
       NAV (SEPARADO DO USU√ÅRIO)
       ========================= */
    .nav{
      background: var(--blue-800);
      border-bottom:1px solid rgba(255,255,255,.10);
      position: sticky;
      top: 86px; /* ‚úÖ fica abaixo do topo */
      z-index: 70;
      box-shadow: 0 10px 20px rgba(2,6,23,.10);
    }
    .nav-inner{
      max-width:1100px;
      margin:0 auto;
      padding:10px 10px 12px;
    }
    .menu{
      display:flex;
      gap:10px;
      overflow-x:auto;
      -webkit-overflow-scrolling:touch;
      scrollbar-width:none;
      padding-bottom:6px;
    }
    .menu::-webkit-scrollbar{ display:none; }
    .menu a{
      flex:0 0 auto;
      white-space:nowrap;
      color:#fff;
      text-decoration:none;
      font-weight:850;
      font-size:14px;
      padding:10px 12px;
      border-radius:999px;
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.10);
      transition: transform .14s ease, background .14s ease, box-shadow .14s ease, border-color .14s ease;
      outline:none;
    }
    .menu a:hover{
      background:rgba(255,255,255,.16);
      transform: translateY(-1px);
      box-shadow: 0 12px 20px rgba(2,6,23,.18);
      border-color: rgba(255,255,255,.16);
    }
    .menu a:focus-visible{ box-shadow: var(--ring); }
    .menu a[aria-current="page"]{
      background:rgba(255,255,255,.22);
      border-color:rgba(255,255,255,.28);
      box-shadow: 0 12px 20px rgba(2,6,23,.20);
    }
    .menu a.premium-on{
      background: linear-gradient(180deg, rgba(22,163,74,.20), rgba(22,163,74,.12));
      border-color: rgba(22,163,74,.35);
    }

    @media (max-width: 900px){
      .nav{ top: 116px; } /* topo fica mais alto quando quebra linha */
      .top-actions{ width:100%; justify-content:space-between; }
      .user-pill{ max-width: 100%; }
    }

    /* =========================
       MAIN
       ========================= */
    .container{
      max-width:1100px;
      margin:0 auto;
      padding:18px 12px 40px;
    }
    .card{
      background:var(--card);
      border:1px solid var(--border);
      box-shadow:var(--shadow);
      border-radius:var(--radius);
      padding:18px 16px;
      margin:14px 0;
      transition: transform .18s ease, box-shadow .18s ease, border-color .18s ease;
    }
    .card:hover{
      transform: translateY(-2px);
      box-shadow: var(--shadow2);
      border-color: rgba(11,91,211,.18);
    }

    .title{
      display:flex;
      align-items:center;
      gap:10px;
      margin:0 0 10px;
      font-size:clamp(18px, 3.2vw, 22px);
      font-weight:950;
      color:#0b2b63;
      letter-spacing:.2px;
    }
    .bar{
      width:6px;
      height:22px;
      border-radius:999px;
      background:var(--accent);
      flex:0 0 auto;
      box-shadow: 0 12px 20px rgba(37,99,235,.22);
    }
    .lead{
      margin:0;
      color:var(--muted);
      font-size:15px;
    }

    .grid{
      display:grid;
      grid-template-columns: 1.1fr .9fr;
      gap:14px;
      align-items:start;
    }
    @media (max-width:900px){
      .grid{grid-template-columns:1fr}
    }

    .img-wrap{
      border:1px solid var(--border);
      border-radius:16px;
      overflow:hidden;
      background:#fff;
    }
    .img-wrap img{
      width:100%;
      display:block;
    }

    /* FAQ */
    .faq{
      display:grid;
      grid-template-columns:1fr 1fr;
      gap:14px;
    }
    @media (max-width:900px){
      .faq{grid-template-columns:1fr}
    }
    details{
      background:#fff;
      border:1px solid var(--border);
      border-radius:16px;
      box-shadow: var(--shadow);
      padding:12px 12px;
    }
    summary{
      cursor:pointer;
      font-weight:950;
      color:#0b2b63;
      list-style:none;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
    }
    summary::-webkit-details-marker{display:none}
    .faq-body{
      color:var(--muted);
      margin:10px 0 0;
      font-size:14px;
      line-height:1.55;
    }

    .footer{
      text-align:center;
      color:var(--muted);
      font-size:12px;
      margin-top:18px;
      padding-top:8px;
    }

    /* mini toast */
    .toast{
      position: fixed;
      right: 14px;
      bottom: 14px;
      z-index: 120;
      background: #0b2f73;
      color:#eaf2ff;
      border:1px solid rgba(255,255,255,.12);
      box-shadow: 0 18px 40px rgba(2,6,23,.26);
      border-radius: 16px;
      padding: 10px 12px;
      max-width: 360px;
      display:none;
      white-space:pre-wrap;
      font-size:13px;
    }
    .toast.show{ display:block; animation: popMenu .12s ease both; }
  </style>
</head>

<body>

  <!-- Supabase (sem module: mais compat√≠vel no GitHub Pages) -->
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <header class="top">
    <div class="top-inner">
      <div class="brand">
        <div class="logo">LPP</div>
        <div>
          <h1>Les√£o por Press√£o</h1>
          <p>Projeto Integrador ‚Ä¢ conte√∫do educativo</p>
        </div>
      </div>

      <div class="top-actions">
        <button class="install-btn" id="btnInstall" type="button">üì≤ Instalar aplicativo</button>

        <!-- Usu√°rio (nunca ‚Äútampa‚Äù o menu agora porque o menu fica em outra barra) -->
        <div class="user-pill" id="userPill" role="button" aria-haspopup="menu" aria-expanded="false" tabindex="0">
          <div class="user-ico">üë§</div>
          <div class="user-text">
            <div class="user-hello">
              Ol√°,
              <span class="badge free" id="userBadge">Carregando‚Ä¶</span>
            </div>
            <div class="user-email" id="userEmail">Verificando sess√£o‚Ä¶</div>
          </div>
          <div class="chev">‚ñæ</div>

          <div class="user-menu" id="userMenu" role="menu" aria-label="Menu do usu√°rio">
            <div class="user-note" id="userNote">Aguarde‚Ä¶</div>
            <a href="./premium.html" role="menuitem">‚≠ê Premium</a>
            <div class="sep"></div>
            <a href="./login.html" role="menuitem" id="btnLogin">Entrar</a>
            <button id="btnLogout" type="button" role="menuitem">Sair</button>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- MENU (separado do usu√°rio => n√£o sobrep√µe) -->
  <nav class="nav" aria-label="Navega√ß√£o principal">
    <div class="nav-inner">
      <div class="menu">
        <a href="index.html" aria-current="page">In√≠cio</a>
        <a href="nosso-produto.html">Nosso Produto</a>
        <a href="tratamento.html">Tratamento</a>
        <a href="impacto-economico.html">Impacto Econ√¥mico</a>
        <a href="guia-simples.html">Guia Simples</a>
        <a class="premium-on" href="selecao-produtos.html">Sele√ß√£o de Produtos ‚≠ê</a>
        <a href="avaliacao.html">Avalia√ß√£o</a>
      </div>
    </div>
  </nav>

  <main class="container">

    <!-- CONTE√öDO (voc√™ pode manter o que j√° tinha; aqui est√° um layout bonito e leve) -->
    <section class="card">
      <h2 class="title"><span class="bar"></span>Conceito</h2>

      <div class="grid">
        <p class="lead">
          Les√£o por press√£o √© um dano localizado na pele e/ou no tecido subjacente, geralmente sobre uma proemin√™ncia
          √≥ssea, resultante de press√£o prolongada ou press√£o associada ao cisalhamento.
        </p>

        <!-- ‚úÖ Se voc√™ j√° tem a imagem em algum arquivo, mantenha o src correto -->
        <div class="img-wrap" aria-label="Ilustra√ß√£o de les√£o por press√£o">
          <img src="img/lpp-conceito.png" alt="Ilustra√ß√£o de les√£o por press√£o (pontos de risco e exemplos de les√µes)."
               onerror="this.style.display='none'; this.parentElement.innerHTML='<div style=&quot;padding:14px;color:#475569&quot;><b>Dica:</b> coloque sua imagem aqui em <code>img/lpp-conceito.png</code> (ou ajuste o <code>src</code> para o arquivo correto).</div>';">
        </div>
      </div>
    </section>

    <!-- ‚úÖ FAQ (MANTIDO: caixas embaixo) -->
    <section class="card">
      <h2 class="title"><span class="bar"></span>Perguntas frequentes (FAQ)</h2>

      <div class="faq">
        <details>
          <summary>Como prevenir les√£o por press√£o? <span>+</span></summary>
          <div class="faq-body">
            Medidas-chave incluem: redistribui√ß√£o de press√£o (reposicionamento), redu√ß√£o de fric√ß√£o/cisalhamento,
            manejo de umidade/incontin√™ncia, avalia√ß√£o de risco (ex.: escalas) e suporte nutricional quando necess√°rio.
          </div>
        </details>

        <details>
          <summary>O que mais influencia a cicatriza√ß√£o? <span>+</span></summary>
          <div class="faq-body">
            Al√©m do curativo: al√≠vio de press√£o, controle glic√™mico, perfus√£o/oxigena√ß√£o, infec√ß√£o, nutri√ß√£o e ades√£o ao plano.
            O ‚Äúproduto‚Äù sozinho n√£o resolve sem o cuidado global.
          </div>
        </details>

        <details>
          <summary>Quando devo suspeitar de infec√ß√£o? <span>+</span></summary>
          <div class="faq-body">
            A suspeita pode ocorrer com aumento de dor, exsudato purulento, odor forte persistente, piora do leito,
            hiperemia/edema progressivos e sinais sist√™micos. Avalia√ß√£o profissional e protocolo institucional s√£o essenciais.
          </div>
        </details>

        <details>
          <summary>Sele√ß√£o de Produtos √© Premium? <span>+</span></summary>
          <div class="faq-body">
            Sim. A p√°gina Premium valida seu perfil antes de liberar o conte√∫do. Se voc√™ n√£o for Premium, o sistema impede o acesso.
          </div>
        </details>
      </div>
    </section>

    <div class="footer">¬© 2026 ‚Ä¢ Projeto Integrador</div>
  </main>

  <div class="toast" id="toast"></div>

  <script>
    // =========================
    // PWA INSTALL (Android/Chrome)
    // =========================
    let deferredPrompt = null;
    const btnInstall = document.getElementById("btnInstall");
    const toast = document.getElementById("toast");

    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add("show");
      setTimeout(()=> toast.classList.remove("show"), 2400);
    }

    window.addEventListener("beforeinstallprompt", (e) => {
      e.preventDefault();
      deferredPrompt = e;
      btnInstall.style.display = "inline-block";
    });

    btnInstall.addEventListener("click", async () => {
      if (!deferredPrompt) {
        showToast("Se n√£o aparecer a instala√ß√£o, use o menu do navegador: ‚ÄúAdicionar √† tela inicial‚Äù.");
        return;
      }
      deferredPrompt.prompt();
      await deferredPrompt.userChoice;
      deferredPrompt = null;
    });

    // =========================
    // USER MENU (n√£o trava)
    // =========================
    const SUPABASE_URL = "https://owpswekkfaleauwjmahc.supabase.co";
    const SUPABASE_ANON_KEY = "sb_publishable_I58BBfTZcWtPEIIDSuN5MA_sV8jfPfq";

    const userPill = document.getElementById("userPill");
    const userMenu = document.getElementById("userMenu");
    const userEmail = document.getElementById("userEmail");
    const userBadge = document.getElementById("userBadge");
    const userNote  = document.getElementById("userNote");
    const btnLogout = document.getElementById("btnLogout");
    const btnLogin  = document.getElementById("btnLogin");

    function toggleMenu(open){
      const willOpen = (typeof open === "boolean") ? open : !userMenu.classList.contains("open");
      userMenu.classList.toggle("open", willOpen);
      userPill.setAttribute("aria-expanded", String(willOpen));
    }
    document.addEventListener("click", (e) => {
      if (!userPill.contains(e.target)) toggleMenu(false);
    });
    userPill.addEventListener("click", () => toggleMenu());
    userPill.addEventListener("keydown", (e) => {
      if (e.key === "Enter" || e.key === " ") { e.preventDefault(); toggleMenu(); }
      if (e.key === "Escape") toggleMenu(false);
    });

    let supabaseClient = null;

    async function initUser(){
      try{
        if (!window.supabase){
          userEmail.textContent = "Sem conex√£o";
          userBadge.textContent = "Offline";
          userBadge.className = "badge free";
          userNote.textContent = "Falha ao carregar Supabase. Recarregue a p√°gina.";
          btnLogout.style.display = "none";
          btnLogin.style.display = "flex";
          return;
        }

        supabaseClient = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        // ‚úÖ hard-timeout pra n√£o ficar ‚Äúverificando‚Ä¶‚Äù eterno
        const hard = new Promise((_, rej) => setTimeout(() => rej(new Error("Timeout")), 3500));

        const { data: userRes, error: userErr } = await Promise.race([
          supabaseClient.auth.getUser(),
          hard
        ]);

        if (userErr || !userRes?.user){
          userEmail.textContent = "N√£o logado";
          userBadge.textContent = "Visitante";
          userBadge.className = "badge free";
          userNote.textContent = "Voc√™ pode entrar para acessar recursos Premium.";
          btnLogout.style.display = "none";
          btnLogin.style.display = "flex";
          return;
        }

        userEmail.textContent = userRes.user.email || "Usu√°rio";
        userNote.textContent = "Verificando Premium‚Ä¶";
        btnLogout.style.display = "flex";
        btnLogin.style.display = "none";

        // consulta premium (se der erro, n√£o trava)
        const { data, error } = await Promise.race([
          supabaseClient.from("profiles").select("premium").eq("id", userRes.user.id).single(),
          new Promise((_, rej) => setTimeout(() => rej(new Error("Timeout perfis")), 3500))
        ]);

        if (error){
          userBadge.textContent = "Logado";
          userBadge.className = "badge free";
          userNote.textContent = "Logado. N√£o foi poss√≠vel ler Premium agora.";
          return;
        }

        if (data?.premium){
          userBadge.textContent = "Premium ‚úÖ";
          userBadge.className = "badge premium";
          userNote.textContent = "Premium ativo. Conte√∫do Premium liberado.";
        } else {
          userBadge.textContent = "Gr√°tis";
          userBadge.className = "badge free";
          userNote.textContent = "Plano gratuito. Ative Premium para liberar Sele√ß√£o de Produtos.";
        }

      } catch(e){
        userEmail.textContent = "N√£o logado";
        userBadge.textContent = "Visitante";
        userBadge.className = "badge free";
        userNote.textContent = "Falha tempor√°ria ao verificar sess√£o.";
        btnLogout.style.display = "none";
        btnLogin.style.display = "flex";
      }
    }

    btnLogout.addEventListener("click", async () => {
      try{
        await supabaseClient?.auth?.signOut?.();
      } finally {
        window.location.replace("./index.html");
      }
    });

    initUser();
  </script>

</body>
</html>