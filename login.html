<!doctype html>
<html lang="pt-BR">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Entrar ‚Ä¢ LPP</title>

<style>
:root{
  --bg1:#0b3d91;
  --bg2:#0a2f73;
  --card:#ffffff;
  --text:#0f172a;
  --muted:#475569;
  --border:rgba(15,23,42,.12);
  --shadow:0 22px 60px rgba(2,6,23,.22);
  --radius:20px;
  --primary:#2563eb;
  --primary2:#1d4ed8;
  --ok:#16a34a;
  --warn:#f59e0b;
  --bad:#dc2626;
  --field:#f8fafc;
  --focus:rgba(37,99,235,.22);
}

*{box-sizing:border-box}
html,body{height:100%}

body{
  margin:0;
  font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text);
  background:
    radial-gradient(900px 500px at 20% 10%, rgba(255,255,255,.15), transparent 60%),
    linear-gradient(180deg, var(--bg1), var(--bg2));
  display:flex;
  align-items:center;
  justify-content:center;
  padding:20px;
}

.wrap{
  width:min(920px,100%);
  display:grid;
  grid-template-columns:1fr 420px;
  gap:18px;
}
@media(max-width:900px){
  .wrap{grid-template-columns:1fr}
}

.hero{
  background:rgba(255,255,255,.10);
  border:1px solid rgba(255,255,255,.18);
  border-radius:var(--radius);
  padding:22px;
  backdrop-filter:blur(10px);
  color:#fff;
  box-shadow:0 20px 50px rgba(0,0,0,.25);
}

.hero h1{
  margin:0 0 8px;
  font-weight:1000;
}

.hero p{
  margin:0;
  font-size:14px;
  opacity:.9;
}

.card{
  background:var(--card);
  border-radius:var(--radius);
  padding:20px;
  box-shadow:var(--shadow);
}

.card h2{
  margin:0 0 10px;
  font-size:20px;
  font-weight:1000;
}

.tabs{
  display:flex;
  gap:8px;
  margin-bottom:14px;
}

.tab{
  flex:1;
  padding:10px;
  border-radius:999px;
  border:1px solid var(--border);
  background:#fff;
  font-weight:900;
  cursor:pointer;
  color:var(--muted);
}

.tab[aria-selected="true"]{
  background:rgba(37,99,235,.08);
  color:var(--primary2);
  border-color:rgba(37,99,235,.35);
}

label{
  font-size:12px;
  font-weight:900;
  margin-top:10px;
  display:block;
}

.field{
  width:100%;
  padding:12px;
  border-radius:14px;
  border:1px solid var(--border);
  background:var(--field);
  font-size:14px;
  outline:none;
  transition:.2s;
}

.field:focus{
  background:#fff;
  border-color:rgba(37,99,235,.45);
  box-shadow:0 0 0 4px var(--focus);
}

/* ===== SENHA ===== */
.password-wrap{
  position:relative;
}

.password-wrap input{
  padding-right:45px;
}

.toggle-pass{
  position:absolute;
  right:10px;
  top:50%;
  transform:translateY(-50%);
  background:none;
  border:none;
  cursor:pointer;
  font-size:16px;
  opacity:.6;
}

.toggle-pass:hover{
  opacity:1;
}

.row{
  display:flex;
  justify-content:space-between;
  align-items:center;
  margin-top:8px;
}

.link{
  border:none;
  background:none;
  color:var(--primary2);
  font-weight:900;
  cursor:pointer;
  font-size:12px;
  text-decoration:underline;
}

.btn{
  width:100%;
  margin-top:14px;
  padding:12px;
  border-radius:14px;
  border:1px solid rgba(37,99,235,.35);
  background:linear-gradient(180deg,var(--primary),var(--primary2));
  color:#fff;
  font-weight:1000;
  cursor:pointer;
}

.btn.secondary{
  background:#fff;
  color:var(--primary2);
}

.msg{
  margin-top:12px;
  padding:10px;
  border-radius:12px;
  display:none;
  font-size:13px;
}

.msg.show{display:block}
.msg.ok{background:rgba(22,163,74,.08); color:#14532d}
.msg.bad{background:rgba(220,38,38,.08); color:#7f1d1d}
.msg.warn{background:rgba(245,158,11,.08); color:#7c2d12}
</style>
</head>

<body>

<div class="wrap">
  <section class="hero">
    <h1>LPP ‚Ä¢ Acesso</h1>
    <p>Entre para acessar o conte√∫do premium do projeto.</p>
  </section>

  <main class="card">
    <h2 id="formTitle">Entrar</h2>

    <div class="tabs">
      <button class="tab" id="tabLogin" aria-selected="true">Login</button>
      <button class="tab" id="tabSignup" aria-selected="false">Criar conta</button>
    </div>

    <label>Email</label>
    <input id="email" class="field" type="email" autocomplete="email">

    <label>Senha</label>
    <div class="password-wrap">
      <input id="password" class="field" type="password" autocomplete="current-password">
      <button type="button" id="togglePassword" class="toggle-pass">üëÅ</button>
    </div>

    <div class="row">
      <div></div>
      <button class="link" id="btnForgot">Esqueci minha senha</button>
    </div>

    <button class="btn" id="btnPrimary">Entrar</button>
    <button class="btn secondary" id="btnHome">Voltar ao site</button>

    <div id="msg" class="msg"></div>
  </main>
</div>

<script type="module">
import { createClient } from "https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";

const SUPABASE_URL = "https://owpswekkfaleauwjmahc.supabase.co";
const SUPABASE_ANON_KEY = "sb_publishable_I58BBfTZcWtPEIIDSuN5MA_sV8jfPfq";
const SITE_BASE = "https://luanhnn25-jpg.github.io/lesa/";

const supabase = createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

const msg = document.getElementById("msg");
const email = document.getElementById("email");
const password = document.getElementById("password");
const toggle = document.getElementById("togglePassword");
const btnPrimary = document.getElementById("btnPrimary");
const btnForgot = document.getElementById("btnForgot");
const tabLogin = document.getElementById("tabLogin");
const tabSignup = document.getElementById("tabSignup");
const formTitle = document.getElementById("formTitle");

let mode="login";

function setMsg(text,type){
  msg.className="msg show "+type;
  msg.textContent=text;
}

function setMode(m){
  mode=m;
  tabLogin.setAttribute("aria-selected",m==="login");
  tabSignup.setAttribute("aria-selected",m==="signup");
  btnPrimary.textContent=m==="login"?"Entrar":"Criar conta";
  formTitle.textContent=m==="login"?"Entrar":"Criar conta";
}

tabLogin.onclick=()=>setMode("login");
tabSignup.onclick=()=>setMode("signup");

toggle.onclick=()=>{
  const isPass=password.type==="password";
  password.type=isPass?"text":"password";
  toggle.textContent=isPass?"üôà":"üëÅ";
};

btnPrimary.onclick=async()=>{
  if(!email.value||!password.value) return setMsg("Preencha todos os campos.","bad");

  if(mode==="login"){
    const {error}=await supabase.auth.signInWithPassword({
      email:email.value,
      password:password.value
    });
    if(error) return setMsg(error.message,"bad");
    window.location.href=SITE_BASE+"premium.html";
  }else{
    const {error}=await supabase.auth.signUp({
      email:email.value,
      password:password.value,
      options:{emailRedirectTo:SITE_BASE+"login.html"}
    });
    if(error) return setMsg(error.message,"bad");
    setMsg("Conta criada! Verifique seu email.","ok");
  }
};

btnForgot.onclick=async()=>{
  if(!email.value) return setMsg("Digite seu email primeiro.","bad");

  const {error}=await supabase.auth.resetPasswordForEmail(email.value,{
    redirectTo:SITE_BASE+"login.html"
  });
  if(error) return setMsg(error.message,"bad");

  setMsg("Link de recupera√ß√£o enviado.","ok");
};

document.getElementById("btnHome").onclick=()=>{
  window.location.href=SITE_BASE+"index.html";
};

setMode("login");
</script>

</body>
</html>
